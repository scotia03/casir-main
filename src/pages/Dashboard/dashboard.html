<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard</title>
  <link rel="stylesheet" href="dashboard.css">
  <script defer src="https://www.gstatic.com/firebasejs/12.9.0/firebase-app-compat.js"></script>
  <script defer src="https://www.gstatic.com/firebasejs/12.9.0/firebase-firestore-compat.js"></script>
  <script defer src="../shared/web-api.js?v=20260212"></script>
  <script defer src="dashboard.js?v=20260212"></script>
</head>
<body>
  <div id="sidebarBackdrop" class="sidebarBackdrop"></div>

  <div class="appShell">
    <aside class="sidebar">
      <button id="sidebarCloseBtn" class="sidebarCloseBtn" type="button" aria-label="Tutup menu">
        X
      </button>

      <div class="brand">
        <h2>Kasir App</h2>
        <p>Sistem Penjualan</p>
      </div>

      <nav class="sideNav">
        <button class="navBtn active" data-nav-target="sectionProductList">Daftar Produk</button>
        <button class="navBtn" data-nav-target="sectionAddProduct">Tambah Produk</button>
        <button class="navBtn" data-nav-target="sectionSales">Transaksi</button>
      </nav>

      <div class="sidebarFoot">
        <p id="userInfo"></p>
        <button id="logout" class="logoutBtn">Logout</button>
      </div>
    </aside>

    <div class="contentWrap">
      <header class="topbar">
        <button id="sidebarToggleBtn" class="mobileMenuBtn" type="button" aria-label="Buka menu">
          <span></span>
          <span></span>
          <span></span>
        </button>

        <div>
          <h1>Dashboard Kasir</h1>
          <p class="subtitle">Pilih produk dari daftar utama, lalu buka ikon keranjang di kanan bawah untuk checkout.</p>
        </div>
      </header>

      <main class="featureContainer">
        <section id="sectionProductList" class="card featurePanel active">
          <h2>Daftar Produk</h2>
          <p class="sectionHint">Klik `Stok Habis` untuk memindahkan produk ke bagian stok kosong.</p>

          <div class="tableWrap">
            <table>
              <thead>
                <tr>
                  <th>Produk</th>
                  <th>Harga</th>
                  <th>Aksi</th>
                </tr>
              </thead>
              <tbody id="productAvailableBody"></tbody>
            </table>
          </div>

          <h3 class="subSectionTitle">Stok Kosong</h3>
          <div class="tableWrap">
            <table>
              <thead>
                <tr>
                  <th>Produk</th>
                  <th>Harga</th>
                  <th>Aksi</th>
                </tr>
              </thead>
              <tbody id="productOutOfStockBody"></tbody>
            </table>
          </div>
          <p id="productListStatus" class="status"></p>
        </section>

        <section id="sectionAddProduct" class="card featurePanel">
          <h2>Tambah Produk</h2>
          <form id="productForm" class="stack">
            <label>
              Nama Produk
              <input type="text" id="productName" placeholder="Contoh: Es Teh Botol" required>
            </label>

            <label>
              Harga (Rp)
              <input type="number" id="productPrice" placeholder="10000" min="1" required>
            </label>

            <button type="submit">Simpan Produk</button>
          </form>
          <p id="productStatus" class="status"></p>

          <h3 class="subSectionTitle">Daftar Produk Tersedia</h3>
          <div class="tableWrap">
            <table>
              <thead>
                <tr>
                  <th>Produk</th>
                  <th>Harga</th>
                  <th>Aksi</th>
                </tr>
              </thead>
              <tbody id="addProductAvailableBody"></tbody>
            </table>
          </div>
          <p id="addProductListStatus" class="status"></p>
        </section>

        <section id="sectionSales" class="card featurePanel">
          <h2>Transaksi Terakhir</h2>
          <ul id="salesList" class="salesList"></ul>
        </section>
      </main>
    </div>
  </div>

  <button id="cartFab" class="cartFab" type="button" aria-label="Buka keranjang">
    <svg viewBox="0 0 24 24" aria-hidden="true">
      <path d="M3 4h2l2.2 9.2A2 2 0 0 0 9.15 15H18a2 2 0 0 0 1.95-1.55L21 8H7" />
      <circle cx="10" cy="19" r="1.7" />
      <circle cx="17" cy="19" r="1.7" />
    </svg>
    <span id="cartFabCount" class="cartFabCount">0</span>
  </button>

  <div id="cartBackdrop" class="cartBackdrop"></div>

  <aside id="cartDrawer" class="cartDrawer" aria-label="Keranjang checkout">
    <div class="cartDrawerHeader">
      <h3>Keranjang Checkout</h3>
      <button id="closeCartBtn" class="iconBtn" type="button">X</button>
    </div>

    <div id="cartBody" class="cartList"></div>

    <div class="totals">
      <p>Total Belanja: <strong id="cartTotal">Rp0</strong></p>
      <p>Jumlah Bayar: <strong id="paidAmountDisplay">Rp0</strong></p>
      <button id="checkoutBtn">Checkout & Simpan</button>
    </div>
    <p id="checkoutStatus" class="status"></p>
  </aside>
</body>
</html>
